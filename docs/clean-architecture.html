<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HighPipe ê¹”ë”í•œ EKS ì•„í‚¤í…ì²˜</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .nav {
            background: #f1f5f9;
            padding: 20px 30px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background: #2563eb;
        }

        .nav-btn.active {
            background: #1d4ed8;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .zoom-controls {
            display: flex;
            gap: 5px;
        }

        .zoom-btn {
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        .zoom-btn:hover {
            background: #4f46e5;
        }

        .content {
            padding: 30px;
        }

        .diagram-section {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .diagram-section.active {
            display: block;
        }

        .diagram-section h2 {
            color: #1e293b;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .diagram-container {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow: auto;
            min-height: 700px;
            position: relative;
        }

        .diagram-wrapper {
            transform-origin: top left;
            transition: transform 0.3s ease;
            min-width: 100%;
        }

        .mermaid {
            text-align: center;
            min-height: 600px;
        }

        .mermaid svg {
            max-width: none !important;
            width: auto !important;
            height: auto !important;
            min-width: 1400px;
            font-size: 16px !important;
        }

        .description {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3b82f6;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 6px;
            border-left: 3px solid #10b981;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .clean-note {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .clean-note h4 {
            color: #2e7d32;
            margin: 0 0 10px 0;
        }

        .clean-note p {
            color: #1b5e20;
            margin: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—ï¸ HighPipe ê¹”ë”í•œ ì•„í‚¤í…ì²˜</h1>
            <p>í•µì‹¬ ê´€ê³„ë§Œ ëª…í™•í•˜ê²Œ í‘œí˜„í•œ ë‹¨ìˆœí™”ëœ ì„¤ê³„</p>
        </div>

        <div class="nav">
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showDiagram('overview')">ğŸ¯ ì „ì²´ ê°œìš”</button>
                <button class="nav-btn" onclick="showDiagram('dataflow')">ğŸ”„ ë°ì´í„° í”Œë¡œìš°</button>
                <button class="nav-btn" onclick="showDiagram('services')">ğŸ› ï¸ ì„œë¹„ìŠ¤ ê´€ê³„</button>
            </div>
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="zoomIn()">ğŸ”+</button>
                <button class="zoom-btn" onclick="zoomOut()">ğŸ”-</button>
                <button class="zoom-btn" onclick="resetZoom()">100%</button>
                <button class="zoom-btn" onclick="fitToScreen()">ğŸ“± ë§ì¶¤</button>
            </div>
        </div>

        <div class="content">
            <!-- ì „ì²´ ê°œìš” -->
            <div id="overview" class="diagram-section active">
                <h2>ğŸ¯ ì „ì²´ ì‹œìŠ¤í…œ ê°œìš”</h2>

                <div class="clean-note">
                    <h4>ğŸ§¹ ë‹¨ìˆœí™”ëœ ì•„í‚¤í…ì²˜</h4>
                    <p><strong>í•µì‹¬ ì»´í¬ë„ŒíŠ¸:</strong> ì‚¬ìš©ì â†’ ì›¹ ì„œë¹„ìŠ¤ â†’ Kafka â†’ Airflow â†’ ë°ì´í„° ì²˜ë¦¬<br>
                        <strong>ëª…í™•í•œ ì—­í• :</strong> ê° ì»´í¬ë„ŒíŠ¸ì˜ ì±…ì„ê³¼ ê´€ê³„ë¥¼ ë‹¨ìˆœí•˜ê²Œ í‘œí˜„<br>
                        <strong>í•„ìˆ˜ ì—°ê²°ë§Œ:</strong> ë¶ˆí•„ìš”í•œ ì„ ì„ ì œê±°í•˜ì—¬ ê°€ë…ì„± í–¥ìƒ
                    </p>
                </div>

                <div class="description">
                    <h3>í•µì‹¬ ì»´í¬ë„ŒíŠ¸ì™€ ì—­í• </h3>
                    <p>ë³µì¡í•œ ì—°ê²°ì„ ì„ ì œê±°í•˜ê³  ê° ì»´í¬ë„ŒíŠ¸ì˜ í•µì‹¬ ì—­í• ê³¼ ì£¼ìš” ë°ì´í„° íë¦„ë§Œ í‘œí˜„í–ˆìŠµë‹ˆë‹¤.</p>
                </div>

                <div class="features">
                    <div class="feature">
                        <h4>ğŸŒ ì›¹ ì„œë¹„ìŠ¤</h4>
                        <p>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë° API</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ“¨ Kafka</h4>
                        <p>ë©”ì‹œì§€ í ë° ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸŒŠ Airflow</h4>
                        <p>ì›Œí¬í”Œë¡œìš° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ”„ ë°ì´í„° ì²˜ë¦¬</h4>
                        <p>í¬ë¡¤ë§, ë¶„ì„, ì €ì¥</p>
                    </div>
                </div>

                <div class="diagram-container">
                    <div class="diagram-wrapper" id="current-diagram">
                        <div class="mermaid">
                            graph TB
                            %% ì‚¬ìš©ì ê³„ì¸µ
                            User[ğŸ‘¤ ì‚¬ìš©ì]

                            %% ë¡œì»¬ í™˜ê²½
                            subgraph Local["ğŸ  ë¡œì»¬ í™˜ê²½"]
                            Crawler[ğŸ•·ï¸ í¬ë¡¤ë§ ì„œë²„<br />FastAPI + Selenium]
                            end

                            %% EKS í´ëŸ¬ìŠ¤í„° (ë‹¨ìˆœí™”)
                            subgraph EKS["â˜¸ï¸ EKS í´ëŸ¬ìŠ¤í„°"]
                            %% ì›¹ ì„œë¹„ìŠ¤
                            subgraph WebServices["ğŸŒ ì›¹ ì„œë¹„ìŠ¤"]
                            Frontend[âš›ï¸ Frontend<br />React]
                            Backend[ğŸ–¥ï¸ Backend API<br />Node.js]
                            WebSocket[ğŸ”Œ WebSocket<br />ì‹¤ì‹œê°„ í†µì‹ ]
                            end

                            %% ë©”ì‹œì§€ í
                            subgraph MessageQueue["ğŸ“¨ ë©”ì‹œì§€ í"]
                            Kafka[ğŸ“¨ Kafka<br />KRaft ëª¨ë“œ<br />3 ë¸Œë¡œì»¤]
                            end

                            %% ì›Œí¬í”Œë¡œìš°
                            subgraph Workflow["ğŸŒŠ ì›Œí¬í”Œë¡œìš°"]
                            Airflow[ğŸŒŠ Airflow<br />DAG ê´€ë¦¬<br />ì‘ì—… ìŠ¤ì¼€ì¤„ë§]
                            end

                            %% ë°ì´í„° ì²˜ë¦¬
                            subgraph DataProcessing["ğŸ”„ ë°ì´í„° ì²˜ë¦¬"]
                            Spark[âš¡ Spark<br />ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬]
                            Analysis[ğŸ§  LLM ë¶„ì„<br />GPU ê¸°ë°˜]
                            end

                            %% ë°ì´í„° ì €ì¥
                            subgraph DataStorage["ğŸ’¾ ë°ì´í„° ì €ì¥"]
                            Redis[ğŸ”´ Redis<br />ìºì‹œ]
                            PostgreSQL[ğŸ˜ PostgreSQL<br />ë©”íƒ€ë°ì´í„°]
                            end
                            end

                            %% AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤
                            subgraph AWS["â˜ï¸ AWS ì„œë¹„ìŠ¤"]
                            S3[ğŸª£ S3<br />ë°ì´í„° ë ˆì´í¬]
                            Redshift[ğŸ­ Redshift<br />ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤]
                            end

                            %% ì£¼ìš” ë°ì´í„° íë¦„ (ë‹¨ìˆœí™”)
                            User --> Frontend
                            Frontend --> Backend
                            Backend --> Kafka
                            Kafka --> Airflow
                            Airflow -.->|API í˜¸ì¶œ| Crawler
                            Crawler -.->|VPN| Kafka
                            Kafka --> Spark
                            Spark --> Analysis
                            Analysis --> S3
                            Analysis --> Redshift

                            %% ì‹¤ì‹œê°„ í†µì‹ 
                            Backend --> WebSocket
                            Backend --> Redis
                            Backend --> PostgreSQL

                            %% ìŠ¤íƒ€ì¼ë§ (ë‹¨ìˆœí™”)
                            classDef user fill:#FFE0B2,stroke:#FF9800,stroke-width:3px,color:#000
                            classDef local fill:#FFF2CC,stroke:#D6B656,stroke-width:2px,color:#000
                            classDef web fill:#E3F2FD,stroke:#2196F3,stroke-width:2px,color:#000
                            classDef message fill:#FCE4EC,stroke:#E91E63,stroke-width:2px,color:#000
                            classDef workflow fill:#E0F2F1,stroke:#009688,stroke-width:2px,color:#000
                            classDef processing fill:#F3E5F5,stroke:#9C27B0,stroke-width:2px,color:#000
                            classDef storage fill:#FFF3E0,stroke:#FF9800,stroke-width:2px,color:#000
                            classDef aws fill:#FFEBEE,stroke:#F44336,stroke-width:2px,color:#000

                            class User user
                            class Local,Crawler local
                            class WebServices,Frontend,Backend,WebSocket web
                            class MessageQueue,Kafka message
                            class Workflow,Airflow workflow
                            class DataProcessing,Spark,Analysis processing
                            class DataStorage,Redis,PostgreSQL storage
                            class AWS,S3,Redshift aws
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë°ì´í„° í”Œë¡œìš° -->
            <div id="dataflow" class="diagram-section">
                <h2>ğŸ”„ í•µì‹¬ ë°ì´í„° í”Œë¡œìš°</h2>
                <div class="description">
                    <h3>ë‹¨ìˆœí™”ëœ ë°ì´í„° ì²˜ë¦¬ íë¦„</h3>
                    <p>ì‚¬ìš©ì ìš”ì²­ë¶€í„° ê²°ê³¼ ë°˜í™˜ê¹Œì§€ì˜ í•µì‹¬ ë‹¨ê³„ë§Œ í‘œí˜„í•œ ëª…í™•í•œ í”Œë¡œìš°ì…ë‹ˆë‹¤.</p>
                </div>
                <div class="diagram-container">
                    <div class="diagram-wrapper">
                        <div class="mermaid">
                            sequenceDiagram
                            participant User as ğŸ‘¤ ì‚¬ìš©ì
                            participant Web as ğŸŒ ì›¹ ì„œë¹„ìŠ¤
                            participant Kafka as ğŸ“¨ Kafka
                            participant Airflow as ğŸŒŠ Airflow
                            participant Crawler as ğŸ•·ï¸ í¬ë¡¤ë§ ì„œë²„
                            participant Processing as ğŸ”„ ë°ì´í„° ì²˜ë¦¬
                            participant Storage as ğŸ’¾ ì €ì¥ì†Œ

                            Note over User,Storage: ğŸ“Š ìƒí’ˆ ë¶„ì„ ìš”ì²­ í”Œë¡œìš°

                            User->>Web: 1. ë¶„ì„ ìš”ì²­
                            Web->>Kafka: 2. ìš”ì²­ ë©”ì‹œì§€ ë°œí–‰
                            Web-->>User: 3. ìš”ì²­ ID ë°˜í™˜

                            Note over Kafka,Airflow: ğŸŒŠ ì›Œí¬í”Œë¡œìš° ì‹œì‘

                            Kafka->>Airflow: 4. DAG íŠ¸ë¦¬ê±°
                            Airflow->>Crawler: 5. í¬ë¡¤ë§ ì‹œì‘

                            Note over Crawler,Processing: ğŸ”„ ë°ì´í„° ìˆ˜ì§‘ ë° ì²˜ë¦¬

                            loop ë°ì´í„° ìˆ˜ì§‘
                            Crawler-->>Kafka: 6. ì›ë³¸ ë°ì´í„° + ìƒíƒœ
                            Kafka-->>Web: 7. ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸
                            Web-->>User: 8. ì§„í–‰ë¥  í‘œì‹œ
                            end

                            Kafka->>Processing: 9. ë°ì´í„° ë¶„ì„ ì‹œì‘

                            loop ë¶„ì„ ì²˜ë¦¬
                            Processing-->>Kafka: 10. ë¶„ì„ ê²°ê³¼ + ìƒíƒœ
                            Kafka-->>Web: 11. ì‹¤ì‹œê°„ ê²°ê³¼
                            Web-->>User: 12. ê°ì • ì¹´ë“œ í‘œì‹œ
                            end

                            Processing->>Storage: 13. ìµœì¢… ê²°ê³¼ ì €ì¥
                            Processing-->>Kafka: 14. ì™„ë£Œ ì•Œë¦¼
                            Kafka-->>Web: 15. ì™„ë£Œ í†µì§€
                            Web-->>User: 16. ê²°ê³¼ í˜ì´ì§€ ì´ë™

                            Note over User,Storage: âœ… ë¶„ì„ ì™„ë£Œ
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì„œë¹„ìŠ¤ ê´€ê³„ -->
            <div id="services" class="diagram-section">
                <h2>ğŸ› ï¸ ì„œë¹„ìŠ¤ ê°„ ê´€ê³„</h2>
                <div class="description">
                    <h3>í•µì‹¬ ì„œë¹„ìŠ¤ ê°„ ìƒí˜¸ì‘ìš©</h3>
                    <p>ê° ì„œë¹„ìŠ¤ì˜ ì—­í• ê³¼ ìƒí˜¸ì‘ìš©ì„ ëª…í™•í•˜ê²Œ ì •ì˜í•œ ê´€ê³„ë„ì…ë‹ˆë‹¤.</p>
                </div>

                <div class="features">
                    <div class="feature">
                        <h4>ğŸ¯ Producer/Consumer</h4>
                        <p>Kafka ê¸°ë°˜ ë¹„ë™ê¸° ë©”ì‹œì§•</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ”„ API í˜¸ì¶œ</h4>
                        <p>ë™ê¸°ì‹ ì„œë¹„ìŠ¤ ê°„ í†µì‹ </p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ’¾ ë°ì´í„° ì €ì¥</h4>
                        <p>ì˜êµ¬ ì €ì¥ì†Œ ì—°ê²°</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ”Œ ì‹¤ì‹œê°„ í†µì‹ </h4>
                        <p>WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</p>
                    </div>
                </div>

                <div class="diagram-container">
                    <div class="diagram-wrapper">
                        <div class="mermaid">
                            graph TB
                            %% ì„œë¹„ìŠ¤ ì •ì˜
                            subgraph Services["ğŸ› ï¸ í•µì‹¬ ì„œë¹„ìŠ¤"]
                            Backend[ğŸ–¥ï¸ Backend API<br />â€¢ ì‚¬ìš©ì ìš”ì²­ ì²˜ë¦¬<br />â€¢ Kafka Producer<br />â€¢ WebSocket ê´€ë¦¬]

                            Kafka[ğŸ“¨ Kafka<br />â€¢ ë©”ì‹œì§€ í<br />â€¢ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°<br />â€¢ ì„œë¹„ìŠ¤ ê°„ í†µì‹ ]

                            Airflow[ğŸŒŠ Airflow<br />â€¢ ì›Œí¬í”Œë¡œìš° ê´€ë¦¬<br />â€¢ DAG ìŠ¤ì¼€ì¤„ë§<br />â€¢ ì‘ì—… ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜]

                            Crawler[ğŸ•·ï¸ í¬ë¡¤ë§ ì„œë²„<br />â€¢ ë°ì´í„° ìˆ˜ì§‘<br />â€¢ ë©€í‹°í”„ë¡œì„¸ì‹±<br />â€¢ VPN ì—°ê²°]

                            Spark[âš¡ Spark<br />â€¢ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬<br />â€¢ ë°ì´í„° ì „ì²˜ë¦¬<br />â€¢ ì‹¤ì‹œê°„ ë¶„ì„]

                            Analysis[ğŸ§  LLM ë¶„ì„<br />â€¢ ê°ì • ë¶„ì„<br />â€¢ í…ìŠ¤íŠ¸ ìš”ì•½<br />â€¢ GPU ì²˜ë¦¬]
                            end

                            %% ê´€ê³„ ì •ì˜ (ë‹¨ìˆœí™”)
                            subgraph Relations["ğŸ”— ì„œë¹„ìŠ¤ ê´€ê³„"]
                            Backend -->|1. ìš”ì²­ ë°œí–‰| Kafka
                            Kafka -->|2. DAG íŠ¸ë¦¬ê±°| Airflow
                            Airflow -->|3. API í˜¸ì¶œ| Crawler
                            Crawler -->|4. ë°ì´í„° ì „ì†¡| Kafka
                            Kafka -->|5. ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬| Spark
                            Spark -->|6. ë¶„ì„ ìš”ì²­| Analysis
                            Analysis -->|7. ê²°ê³¼ ì „ì†¡| Kafka
                            Kafka -->|8. ìƒíƒœ ì—…ë°ì´íŠ¸| Backend
                            end

                            %% ë°ì´í„° ì €ì¥
                            subgraph Storage["ğŸ’¾ ì €ì¥ì†Œ"]
                            Redis[ğŸ”´ Redis<br />ìºì‹œ + ì„¸ì…˜]
                            S3[ğŸª£ S3<br />ì›ë³¸ ë°ì´í„°]
                            Redshift[ğŸ­ Redshift<br />ë¶„ì„ ê²°ê³¼]
                            end

                            %% ì €ì¥ì†Œ ì—°ê²°
                            Backend --> Redis
                            Crawler --> S3
                            Analysis --> S3
                            Analysis --> Redshift

                            %% ìŠ¤íƒ€ì¼ë§
                            classDef service fill:#E3F2FD,stroke:#1976D2,stroke-width:2px,color:#000
                            classDef relation fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px,color:#000
                            classDef storage fill:#FFF3E0,stroke:#F57C00,stroke-width:2px,color:#000

                            class Backend,Kafka,Airflow,Crawler,Spark,Analysis service
                            class Relations relation
                            class Redis,S3,Redshift storage
                        </div>
                    </div>
                </div>

                <div class="clean-note">
                    <h4>ğŸ”— ì„œë¹„ìŠ¤ ê´€ê³„ ìš”ì•½</h4>
                    <p><strong>1-2ë‹¨ê³„:</strong> ì‚¬ìš©ì ìš”ì²­ â†’ Kafka â†’ Airflow íŠ¸ë¦¬ê±°<br>
                        <strong>3-4ë‹¨ê³„:</strong> Airflow â†’ í¬ë¡¤ë§ ì„œë²„ â†’ ë°ì´í„° ìˆ˜ì§‘<br>
                        <strong>5-6ë‹¨ê³„:</strong> Kafka â†’ Spark ì²˜ë¦¬ â†’ LLM ë¶„ì„<br>
                        <strong>7-8ë‹¨ê³„:</strong> ë¶„ì„ ê²°ê³¼ â†’ Kafka â†’ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentZoom = 1;

        // Mermaid ì´ˆê¸°í™”
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: 'Arial, sans-serif',
            fontSize: 16,
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'basis',
                padding: 40,
                nodeSpacing: 100,
                rankSpacing: 120
            },
            sequence: {
                useMaxWidth: false,
                width: 180,
                height: 80,
                actorMargin: 60,
                boxMargin: 10,
                messageMargin: 40
            }
        });

        function showDiagram(diagramId) {
            // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            const sections = document.querySelectorAll('.diagram-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™”
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
            });

            // ì„ íƒëœ ì„¹ì…˜ í‘œì‹œ
            const targetSection = document.getElementById(diagramId);
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // ì„ íƒëœ ë²„íŠ¼ í™œì„±í™”
            event.target.classList.add('active');

            // ì¤Œ ë¦¬ì…‹
            resetZoom();

            // í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function zoomIn() {
            currentZoom = Math.min(currentZoom * 1.2, 3);
            applyZoom();
        }

        function zoomOut() {
            currentZoom = Math.max(currentZoom / 1.2, 0.3);
            applyZoom();
        }

        function resetZoom() {
            currentZoom = 1;
            applyZoom();
        }

        function fitToScreen() {
            const container = document.querySelector('.diagram-section.active .diagram-container');
            const diagram = document.querySelector('.diagram-section.active .diagram-wrapper');
            if (container && diagram) {
                const containerWidth = container.clientWidth - 40;
                const diagramWidth = diagram.scrollWidth;
                currentZoom = Math.min(containerWidth / diagramWidth, 1);
                applyZoom();
            }
        }

        function applyZoom() {
            const activeDiagram = document.querySelector('.diagram-section.active .diagram-wrapper');
            if (activeDiagram) {
                activeDiagram.style.transform = `scale(${currentZoom})`;
            }

            // ì¤Œ ë ˆë²¨ í‘œì‹œ ì—…ë°ì´íŠ¸
            const zoomDisplay = Math.round(currentZoom * 100);
            document.querySelector('.zoom-controls .zoom-btn:nth-child(3)').textContent = `${zoomDisplay}%`;
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸° ì„¤ì •
        window.addEventListener('load', function () {
            setTimeout(() => {
                mermaid.init();
                setTimeout(fitToScreen, 1000);
            }, 100);
        });
    </script>
</body>

</html>