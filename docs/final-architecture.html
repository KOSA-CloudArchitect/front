<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HighPipe ìµœì¢… EKS ì•„í‚¤í…ì²˜</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .nav {
            background: #f1f5f9;
            padding: 20px 30px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 10px 20px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .nav-btn:hover {
            background: #2563eb;
        }
        
        .nav-btn.active {
            background: #1d4ed8;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        .zoom-controls {
            display: flex;
            gap: 5px;
        }
        
        .zoom-btn {
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }
        
        .zoom-btn:hover {
            background: #4f46e5;
        }
        
        .content {
            padding: 30px;
        }
        
        .diagram-section {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }
        
        .diagram-section.active {
            display: block;
        }
        
        .diagram-section h2 {
            color: #1e293b;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .diagram-container {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow: auto;
            min-height: 700px;
            position: relative;
        }
        
        .diagram-wrapper {
            transform-origin: top left;
            transition: transform 0.3s ease;
            min-width: 100%;
        }
        
        .mermaid {
            text-align: center;
            min-height: 600px;
        }
        
        .mermaid svg {
            max-width: none !important;
            width: auto !important;
            height: auto !important;
            min-width: 1400px;
            font-size: 16px !important;
        }
        
        .description {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3b82f6;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 6px;
            border-left: 3px solid #10b981;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .aws-note {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .aws-note h4 {
            color: #92400e;
            margin: 0 0 10px 0;
        }
        
        .aws-note p {
            color: #78350f;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—ï¸ HighPipe ìµœì¢… EKS ì•„í‚¤í…ì²˜</h1>
            <p>AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ ì¤‘ì‹¬ì˜ ì‹¤ìš©ì  ì„¤ê³„</p>
        </div>
        
        <div class="nav">
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showDiagram('system')">ğŸ¢ ì „ì²´ ì‹œìŠ¤í…œ</button>
                <button class="nav-btn" onclick="showDiagram('kafka')">ğŸ“¨ Kafka êµ¬ì¡°</button>
                <button class="nav-btn" onclick="showDiagram('airflow')">ğŸŒŠ Airflow êµ¬ì„±</button>
                <button class="nav-btn" onclick="showDiagram('dataflow')">ğŸ”„ ë°ì´í„° í”Œë¡œìš°</button>
            </div>
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="zoomIn()">ğŸ”+</button>
                <button class="zoom-btn" onclick="zoomOut()">ğŸ”-</button>
                <button class="zoom-btn" onclick="resetZoom()">100%</button>
                <button class="zoom-btn" onclick="fitToScreen()">ğŸ“± ë§ì¶¤</button>
            </div>
        </div>
        
        <div class="content">
            <!-- ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ -->
            <div id="system" class="diagram-section active">
                <h2>ğŸ¢ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (ìµœì¢…)</h2>
                
                <div class="aws-note">
                    <h4>â˜ï¸ AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ í™œìš©</h4>
                    <p><strong>Amazon MSK:</strong> Kafka ëŒ€ì‹  ê´€ë¦¬í˜• ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤ ì‚¬ìš©<br>
                    <strong>Airflow êµ¬ì„±:</strong> EKS ë‚´ Pod ê¸°ë°˜ ë¶„ì‚° ë°°í¬<br>
                    <strong>ë¡œì»¬ í¬ë¡¤ë§:</strong> VPNì„ í†µí•œ í•˜ì´ë¸Œë¦¬ë“œ ì—°ê²°</p>
                </div>
                
                <div class="description">
                    <h3>AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ ì¤‘ì‹¬ ì•„í‚¤í…ì²˜</h3>
                    <p>Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ Kafka ëŒ€ì‹  Amazon MSKë¥¼ ì‚¬ìš©í•˜ê³ , AirflowëŠ” Pod ê¸°ë°˜ìœ¼ë¡œ ë¶„ì‚° ë°°í¬í•˜ëŠ” ì‹¤ìš©ì ì¸ ì„¤ê³„ì…ë‹ˆë‹¤.</p>
                </div>
                
                <div class="features">
                    <div class="feature">
                        <h4>ğŸ  ë¡œì»¬ í¬ë¡¤ë§</h4>
                        <p>FastAPI + Selenium, VPN ì—°ê²°</p>
                    </div>
                    <div class="feature">
                        <h4>â˜ï¸ Amazon MSK</h4>
                        <p>ê´€ë¦¬í˜• Kafka ì„œë¹„ìŠ¤, ìš´ì˜ ë¶€ë‹´ ìµœì†Œí™”</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸŒŠ Airflow on EKS</h4>
                        <p>Pod ê¸°ë°˜ ë¶„ì‚° ë°°í¬, í™•ì¥ì„± í™•ë³´</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ—„ï¸ RDS Metadata</h4>
                        <p>Airflow ë©”íƒ€ë°ì´í„° ì „ìš© PostgreSQL</p>
                    </div>
                </div>
                
                <div class="diagram-container">
                    <div class="diagram-wrapper" id="current-diagram">
                        <div class="mermaid">
graph TB
    %% ì‚¬ìš©ì
    User[ğŸ‘¤ ì‚¬ìš©ì]
    Internet[ğŸŒ ì¸í„°ë„·]
    
    %% ë¡œì»¬ í™˜ê²½
    subgraph Local["ğŸ  ë¡œì»¬ í™˜ê²½"]
        CrawlingServer[ğŸ•·ï¸ í¬ë¡¤ë§ ì„œë²„<br/>FastAPI + Selenium<br/>ë©€í‹°í”„ë¡œì„¸ì‹±]
        VPNClient[ğŸ”’ VPN Client]
    end
    
    %% AWS í´ë¼ìš°ë“œ
    subgraph AWS["â˜ï¸ AWS Cloud"]
        subgraph VPC["ğŸ¢ VPC"]
            VPNGateway[ğŸ”’ VPN Gateway]
            
            subgraph PublicSubnet["ğŸŒ Public Subnet"]
                ALB[âš–ï¸ Application Load Balancer]
                NAT[ğŸšª NAT Gateway]
            end
            
            subgraph PrivateSubnet["ğŸ”’ Private Subnet"]
                subgraph EKS["â˜¸ï¸ EKS Cluster"]
                    
                    %% Web Tier
                    subgraph WebTier["ğŸ“± web-tier namespace"]
                        Frontend[âš›ï¸ React Frontend<br/>Pods: 3]
                        Nginx[ğŸ”„ Nginx LoadBalancer<br/>Pods: 2]
                        Ingress[ğŸšª Ingress Controller]
                    end
                    
                    %% Application Tier
                    subgraph AppTier["ğŸ”§ app-tier namespace"]
                        BackendAPI[ğŸ–¥ï¸ Backend API<br/>Node.js + Express<br/>Pods: 3-20 HPA]
                        WebSocket[ğŸ”Œ WebSocket Server<br/>Socket.IO<br/>Pods: 2-10 HPA]
                    end
                    
                    %% Airflow Tier
                    subgraph AirflowTier["ğŸŒŠ airflow namespace"]
                        AirflowWebServer[ğŸŒ Airflow WebServer<br/>Pod: 1-3]
                        AirflowScheduler[ğŸ“… Airflow Scheduler<br/>Pod: 1]
                        AirflowWorker[ğŸ‘· Airflow Worker<br/>Pods: 2-10 HPA]
                        GitSync[ğŸ“¦ Git-Sync<br/>DAG ë™ê¸°í™”<br/>Pod: 1]
                    end
                    
                    %% Pipeline Tier
                    subgraph PipelineTier["ğŸ”„ pipeline-tier namespace"]
                        SparkCluster[âš¡ Spark Cluster<br/>Streaming Processing<br/>Driver: 1 Executors: 2-10]
                        AnalysisServer[ğŸ§  LLM Analysis Server<br/>FastAPI + GPU<br/>Pods: 1-5 HPA]
                    end
                    
                    %% Data Tier (Redisë§Œ)
                    subgraph DataTier["ğŸ’¾ data-tier namespace"]
                        Redis[ğŸ”´ Redis Cluster<br/>ìºì‹œ + ì„¸ì…˜<br/>Master: 1 Slaves: 2]
                        PostgresProxy[ğŸ˜ PostgreSQL Proxy<br/>Connection Pooling]
                    end
                    
                    %% Monitoring
                    subgraph Monitoring["ğŸ“Š monitoring namespace"]
                        Prometheus[ğŸ“ˆ Prometheus<br/>ë©”íŠ¸ë¦­ ìˆ˜ì§‘<br/>Pod: 1]
                        Grafana[ğŸ“Š Grafana<br/>ì‹œê°í™”<br/>Pod: 1]
                        AlertManager[ğŸš¨ AlertManager<br/>ì•Œë¦¼<br/>Pod: 1]
                    end
                end
            end
        end
        
        %% Amazon MSK í´ëŸ¬ìŠ¤í„° (ìƒì„¸)
        subgraph MSKCluster["ğŸ“¨ Amazon MSK í´ëŸ¬ìŠ¤í„°"]
            subgraph MSKBrokers["ğŸ–¥ï¸ Kafka ë¸Œë¡œì»¤ (Multi-AZ)"]
                MSKBroker1[ğŸ“¨ MSK Broker 1<br/>AZ-1a<br/>m5.large]
                MSKBroker2[ğŸ“¨ MSK Broker 2<br/>AZ-1b<br/>m5.large]
                MSKBroker3[ğŸ“¨ MSK Broker 3<br/>AZ-1c<br/>m5.large]
            end
            
            subgraph MSKTopics["ğŸ“‹ ì£¼ìš” í† í”½"]
                AnalysisReqTopic[ğŸ“Š analysis-requests<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3]
                RawDataTopic[ğŸ“ raw-review-data<br/>íŒŒí‹°ì…˜: 12, ë³µì œ: 3]
                StatusTopic[ğŸ“ˆ crawling-status<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3]
                ResultTopic[ğŸ“Š analysis-results<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3]
                CardTopic[ğŸ’­ sentiment-cards<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3]
            end
            
            MSKZooKeeper[ğŸ˜ ZooKeeper<br/>ê´€ë¦¬í˜• ì„œë¹„ìŠ¤<br/>3 ë…¸ë“œ í´ëŸ¬ìŠ¤í„°]
        end
        
        %% AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤
        subgraph ManagedServices["ğŸ› ï¸ AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤"]
            RDSWeb[ğŸ—„ï¸ RDS PostgreSQL<br/>ì›¹ ì„œë¹„ìŠ¤ DB<br/>Multi-AZ]
            RDSAirflow[ğŸ—„ï¸ RDS PostgreSQL<br/>Airflow ë©”íƒ€ë°ì´í„° DB<br/>Multi-AZ]
            S3DataLake[ğŸª£ S3 Data Lake<br/>ì›ë³¸ ë¦¬ë·° ë°ì´í„°<br/>íŒŒí‹°ì…˜ êµ¬ì¡°]
            S3Logs[ğŸª£ S3 Airflow Logs<br/>ë¡œê·¸ ì €ì¥ì†Œ]
            Redshift[ğŸ­ Redshift<br/>Data Warehouse<br/>ë¶„ì„ ê²°ê³¼ ì €ì¥]
            ECR[ğŸ“¦ ECR<br/>Container Registry]
            SecretsManager[ğŸ” Secrets Manager<br/>ì¸ì¦ ì •ë³´ ê´€ë¦¬]
            CloudWatch[ğŸ“Š CloudWatch<br/>ë¡œê·¸ + ë©”íŠ¸ë¦­]
        end
    end
    
    %% ì—°ê²° ê´€ê³„
    User --> Internet
    Internet --> ALB
    ALB --> Ingress
    Ingress --> Frontend
    Ingress --> BackendAPI
    Ingress --> AirflowWebServer
    
    %% ì›¹ ì„œë¹„ìŠ¤ ë‚´ë¶€ í†µì‹ 
    Frontend --> BackendAPI
    BackendAPI --> WebSocket
    BackendAPI --> Redis
    BackendAPI --> PostgresProxy
    BackendAPI --> AnalysisReqTopic
    
    %% VPN ì—°ê²°
    VPNClient -.->|VPN í„°ë„| VPNGateway
    CrawlingServer --> VPNClient
    VPNGateway --> RawDataTopic
    
    %% Airflow êµ¬ì„±
    AirflowScheduler --> AirflowWorker
    AirflowWebServer --> RDSAirflow
    AirflowScheduler --> RDSAirflow
    AirflowWorker --> RDSAirflow
    GitSync --> AirflowScheduler
    AirflowWorker --> S3Logs
    
    %% Airflow ì›Œí¬í”Œë¡œìš°
    AirflowWorker -.->|API í˜¸ì¶œ| CrawlingServer
    AirflowWorker --> SparkCluster
    AirflowWorker --> AnalysisServer
    
    %% ë°ì´í„° í”Œë¡œìš° (MSK í† í”½ë³„)
    CrawlingServer -.->|VPN| RawDataTopic
    CrawlingServer -.->|VPN| StatusTopic
    AnalysisReqTopic --> AirflowScheduler
    RawDataTopic --> SparkCluster
    SparkCluster --> ResultTopic
    ResultTopic --> AnalysisServer
    AnalysisServer --> CardTopic
    AnalysisServer --> ResultTopic
    
    %% ë°ì´í„° ì €ì¥
    CrawlingServer -.->|VPN| S3DataLake
    SparkCluster --> S3DataLake
    SparkCluster --> Redshift
    AnalysisServer --> Redshift
    
    %% ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
    PostgresProxy --> RDSWeb
    
    %% MSK í† í”½ê³¼ ë°±ì—”ë“œ ì—°ê²°
    StatusTopic --> BackendAPI
    CardTopic --> BackendAPI
    ResultTopic --> BackendAPI
    
    %% MSK ë¸Œë¡œì»¤ ë¶„ì‚°
    MSKBroker1 --> AnalysisReqTopic
    MSKBroker1 --> RawDataTopic
    MSKBroker2 --> StatusTopic
    MSKBroker2 --> CardTopic
    MSKBroker3 --> ResultTopic
    
    %% ZooKeeper ì—°ê²°
    MSKBroker1 --> MSKZooKeeper
    MSKBroker2 --> MSKZooKeeper
    MSKBroker3 --> MSKZooKeeper
    
    %% ëª¨ë‹ˆí„°ë§
    Prometheus --> BackendAPI
    Prometheus --> MSKBroker1
    Prometheus --> Redis
    Prometheus --> AirflowScheduler
    Grafana --> Prometheus
    AlertManager --> Prometheus
    
    %% ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ê²°
    BackendAPI --> SecretsManager
    AirflowScheduler --> SecretsManager
    AnalysisServer --> S3DataLake
    
    %% ë¡œê¹…
    BackendAPI --> CloudWatch
    AirflowScheduler --> CloudWatch
    AnalysisServer --> CloudWatch
    CrawlingServer -.->|VPN| CloudWatch
    
    %% ìŠ¤íƒ€ì¼ë§
    classDef local fill:#FFF2CC,stroke:#D6B656,stroke-width:3px,color:#000
    classDef aws fill:#FF9900,stroke:#232F3E,stroke-width:2px,color:#fff
    classDef k8s fill:#326CE5,stroke:#fff,stroke-width:2px,color:#fff
    classDef app fill:#4CAF50,stroke:#fff,stroke-width:2px,color:#fff
    classDef data fill:#2196F3,stroke:#fff,stroke-width:2px,color:#fff
    classDef monitor fill:#FF5722,stroke:#fff,stroke-width:2px,color:#fff
    classDef airflow fill:#017CEE,stroke:#fff,stroke-width:2px,color:#fff
    classDef vpn fill:#9C27B0,stroke:#fff,stroke-width:2px,color:#fff
    classDef msk fill:#E91E63,stroke:#fff,stroke-width:2px,color:#fff
    classDef mskTopic fill:#F06292,stroke:#fff,stroke-width:2px,color:#fff
    classDef mskZk fill:#795548,stroke:#fff,stroke-width:2px,color:#fff
    
    class Local,CrawlingServer local
    class AWS,ManagedServices aws
    class EKS,WebTier,AppTier,PipelineTier,DataTier k8s
    class Frontend,BackendAPI,WebSocket,AnalysisServer app
    class Redis,PostgresProxy,RDSWeb,S3DataLake,S3Logs,Redshift data
    class Monitoring,Prometheus,Grafana,AlertManager monitor
    class AirflowTier,AirflowWebServer,AirflowScheduler,AirflowWorker,GitSync airflow
    class VPNClient,VPNGateway vpn
    class MSKCluster,MSKBroker1,MSKBroker2,MSKBroker3,RDSAirflow msk
    class AnalysisReqTopic,RawDataTopic,StatusTopic,ResultTopic,CardTopic mskTopic
    class MSKZooKeeper mskZk
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Kafka êµ¬ì¡° -->
            <div id="kafka" class="diagram-section">
                <h2>ğŸ“¨ Amazon MSK Kafka êµ¬ì¡°</h2>
                <div class="description">
                    <h3>ê´€ë¦¬í˜• Kafka í´ëŸ¬ìŠ¤í„° ì„¤ê³„</h3>
                    <p>Amazon MSKë¥¼ í™œìš©í•œ í† í”½ êµ¬ì¡°ì™€ ë©”ì‹œì§€ í”Œë¡œìš°ì…ë‹ˆë‹¤. ê° í† í”½ì€ íŠ¹ì • ëª©ì ì— ë§ê²Œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                </div>
                
                <div class="features">
                    <div class="feature">
                        <h4>ğŸ“¨ 3 ë¸Œë¡œì»¤ í´ëŸ¬ìŠ¤í„°</h4>
                        <p>ê³ ê°€ìš©ì„±ì„ ìœ„í•œ Multi-AZ ë°°í¬</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ”„ ìë™ ìŠ¤ì¼€ì¼ë§</h4>
                        <p>íŠ¸ë˜í”½ì— ë”°ë¥¸ ìë™ í™•ì¥/ì¶•ì†Œ</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ” ë³´ì•ˆ í†µì‹ </h4>
                        <p>TLS ì•”í˜¸í™” ë° IAM ì¸ì¦</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ“Š ë‚´ì¥ ëª¨ë‹ˆí„°ë§</h4>
                        <p>CloudWatch ë©”íŠ¸ë¦­ ìë™ ìˆ˜ì§‘</p>
                    </div>
                </div>
                
                <div class="diagram-container">
                    <div class="diagram-wrapper">
                        <div class="mermaid">
graph TB
    %% Amazon MSK í´ëŸ¬ìŠ¤í„°
    subgraph MSKCluster["ğŸ“¨ Amazon MSK í´ëŸ¬ìŠ¤í„°"]
        subgraph Brokers["ğŸ–¥ï¸ Kafka ë¸Œë¡œì»¤"]
            Broker1[ğŸ“¨ Broker 1<br/>AZ-1a<br/>m5.large]
            Broker2[ğŸ“¨ Broker 2<br/>AZ-1b<br/>m5.large]
            Broker3[ğŸ“¨ Broker 3<br/>AZ-1c<br/>m5.large]
        end
        
        subgraph ZooKeeper["ğŸ˜ ZooKeeper (ê´€ë¦¬í˜•)"]
            ZK1[ğŸ˜ ZK Node 1<br/>AZ-1a]
            ZK2[ğŸ˜ ZK Node 2<br/>AZ-1b]
            ZK3[ğŸ˜ ZK Node 3<br/>AZ-1c]
        end
    end
    
    %% Kafka í† í”½ êµ¬ì¡°
    subgraph Topics["ğŸ“‹ Kafka í† í”½ êµ¬ì¡°"]
        subgraph RequestTopics["ğŸ“¥ ìš”ì²­ í† í”½"]
            ProductSearchReq[ğŸ” product-search-requests<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3<br/>ë³´ê´€: 7ì¼]
            AnalysisReq[ğŸ“Š analysis-requests<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3<br/>ë³´ê´€: 7ì¼]
            WatchlistReq[â­ watchlist-requests<br/>íŒŒí‹°ì…˜: 3, ë³µì œ: 3<br/>ë³´ê´€: 7ì¼]
        end
        
        subgraph StatusTopics["ğŸ“ˆ ìƒíƒœ í† í”½"]
            CrawlingStatus[ğŸ•·ï¸ crawling-status<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3<br/>ë³´ê´€: 1ì¼]
            AnalysisStatus[ğŸ§  analysis-status<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3<br/>ë³´ê´€: 1ì¼]
            ProcessingStatus[âš¡ processing-status<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3<br/>ë³´ê´€: 1ì¼]
        end
        
        subgraph DataTopics["ğŸ’¾ ë°ì´í„° í† í”½"]
            RawReviews[ğŸ“ raw-review-data<br/>íŒŒí‹°ì…˜: 12, ë³µì œ: 3<br/>ë³´ê´€: 3ì¼<br/>ì••ì¶•: gzip]
            ProcessedReviews[ğŸ”„ processed-review-data<br/>íŒŒí‹°ì…˜: 12, ë³µì œ: 3<br/>ë³´ê´€: 3ì¼<br/>ì••ì¶•: gzip]
            SentimentCards[ğŸ’­ sentiment-cards<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3<br/>ë³´ê´€: 1ì¼]
        end
        
        subgraph ResultTopics["ğŸ“Š ê²°ê³¼ í† í”½"]
            AnalysisResults[ğŸ“ˆ analysis-results<br/>íŒŒí‹°ì…˜: 6, ë³µì œ: 3<br/>ë³´ê´€: 30ì¼]
            Notifications[ğŸ”” notifications<br/>íŒŒí‹°ì…˜: 3, ë³µì œ: 3<br/>ë³´ê´€: 7ì¼]
            Alerts[ğŸš¨ alerts<br/>íŒŒí‹°ì…˜: 3, ë³µì œ: 3<br/>ë³´ê´€: 7ì¼]
        end
    end
    
    %% í”„ë¡œë“€ì„œë“¤
    subgraph Producers["ğŸ“¤ Kafka í”„ë¡œë“€ì„œ"]
        BackendProducer[ğŸ–¥ï¸ Backend API<br/>ë¶„ì„ ìš”ì²­ ë°œí–‰]
        CrawlerProducer[ğŸ•·ï¸ í¬ë¡¤ë§ ì„œë²„<br/>ì›ë³¸ ë°ì´í„° ë°œí–‰]
        SparkProducer[âš¡ Spark<br/>ì²˜ë¦¬ëœ ë°ì´í„° ë°œí–‰]
        AnalysisProducer[ğŸ§  ë¶„ì„ ì„œë²„<br/>ê²°ê³¼ ë°ì´í„° ë°œí–‰]
    end
    
    %% ì»¨ìŠˆë¨¸ë“¤
    subgraph Consumers["ğŸ“¥ Kafka ì»¨ìŠˆë¨¸"]
        AirflowConsumer[ğŸŒŠ Airflow<br/>ìš”ì²­ ìˆ˜ì‹  ë° DAG íŠ¸ë¦¬ê±°]
        SparkConsumer[âš¡ Spark<br/>ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬]
        AnalysisConsumer[ğŸ§  ë¶„ì„ ì„œë²„<br/>ë¶„ì„ ì‘ì—… ìˆ˜í–‰]
        BackendConsumer[ğŸ–¥ï¸ Backend API<br/>ìƒíƒœ/ê²°ê³¼ ìˆ˜ì‹ ]
        NotificationConsumer[ğŸ”” ì•Œë¦¼ ì„œë¹„ìŠ¤<br/>ì•Œë¦¼ ë°œì†¡]
    end
    
    %% í”„ë¡œë“€ì„œ â†’ í† í”½ ì—°ê²°
    BackendProducer --> ProductSearchReq
    BackendProducer --> AnalysisReq
    BackendProducer --> WatchlistReq
    
    CrawlerProducer --> RawReviews
    CrawlerProducer --> CrawlingStatus
    
    SparkProducer --> ProcessedReviews
    SparkProducer --> ProcessingStatus
    
    AnalysisProducer --> SentimentCards
    AnalysisProducer --> AnalysisResults
    AnalysisProducer --> AnalysisStatus
    AnalysisProducer --> Notifications
    
    %% í† í”½ â†’ ì»¨ìŠˆë¨¸ ì—°ê²°
    ProductSearchReq --> AirflowConsumer
    AnalysisReq --> AirflowConsumer
    WatchlistReq --> AirflowConsumer
    
    RawReviews --> SparkConsumer
    ProcessedReviews --> AnalysisConsumer
    
    CrawlingStatus --> BackendConsumer
    AnalysisStatus --> BackendConsumer
    ProcessingStatus --> BackendConsumer
    SentimentCards --> BackendConsumer
    AnalysisResults --> BackendConsumer
    
    Notifications --> NotificationConsumer
    Alerts --> NotificationConsumer
    
    %% ë¸Œë¡œì»¤ ì—°ê²°
    Broker1 --> ProductSearchReq
    Broker1 --> RawReviews
    Broker1 --> AnalysisResults
    
    Broker2 --> AnalysisReq
    Broker2 --> ProcessedReviews
    Broker2 --> SentimentCards
    
    Broker3 --> WatchlistReq
    Broker3 --> CrawlingStatus
    Broker3 --> Notifications
    
    %% ZooKeeper ì—°ê²°
    Broker1 --> ZK1
    Broker2 --> ZK2
    Broker3 --> ZK3
    
    %% ìŠ¤íƒ€ì¼ë§
    classDef broker fill:#E91E63,stroke:#fff,stroke-width:2px,color:#fff
    classDef zk fill:#795548,stroke:#fff,stroke-width:2px,color:#fff
    classDef requestTopic fill:#2196F3,stroke:#fff,stroke-width:2px,color:#fff
    classDef statusTopic fill:#FF9800,stroke:#fff,stroke-width:2px,color:#fff
    classDef dataTopic fill:#4CAF50,stroke:#fff,stroke-width:2px,color:#fff
    classDef resultTopic fill:#9C27B0,stroke:#fff,stroke-width:2px,color:#fff
    classDef producer fill:#F44336,stroke:#fff,stroke-width:2px,color:#fff
    classDef consumer fill:#3F51B5,stroke:#fff,stroke-width:2px,color:#fff
    
    class Broker1,Broker2,Broker3 broker
    class ZK1,ZK2,ZK3 zk
    class ProductSearchReq,AnalysisReq,WatchlistReq requestTopic
    class CrawlingStatus,AnalysisStatus,ProcessingStatus statusTopic
    class RawReviews,ProcessedReviews,SentimentCards dataTopic
    class AnalysisResults,Notifications,Alerts resultTopic
    class BackendProducer,CrawlerProducer,SparkProducer,AnalysisProducer producer
    class AirflowConsumer,SparkConsumer,AnalysisConsumer,BackendConsumer,NotificationConsumer consumer
                        </div>
                    </div>
                </div>
                
                <div class="aws-note">
                    <h4>ğŸ“¨ Kafka í† í”½ ì„¤ê³„ ì›ì¹™</h4>
                    <p><strong>íŒŒí‹°ì…”ë‹:</strong> ì²˜ë¦¬ëŸ‰ì— ë”°ë¥¸ íŒŒí‹°ì…˜ ìˆ˜ ì¡°ì • (ìš”ì²­: 6ê°œ, ë°ì´í„°: 12ê°œ)<br>
                    <strong>ë³µì œ:</strong> ëª¨ë“  í† í”½ ë³µì œ íŒ©í„° 3ìœ¼ë¡œ ê³ ê°€ìš©ì„± í™•ë³´<br>
                    <strong>ë³´ê´€ ì •ì±…:</strong> ë°ì´í„° íŠ¹ì„±ì— ë”°ë¥¸ ì°¨ë“± ë³´ê´€ (ìƒíƒœ: 1ì¼, ê²°ê³¼: 30ì¼)<br>
                    <strong>ì••ì¶•:</strong> ëŒ€ìš©ëŸ‰ ë°ì´í„° í† í”½ì— gzip ì••ì¶• ì ìš©</p>
                </div>
                
                <div class="description">
                    <h3>ì£¼ìš” Kafka ë©”ì‹œì§€ êµ¬ì¡°</h3>
                    <pre style="background: #f1f5f9; padding: 15px; border-radius: 6px; overflow-x: auto;">
<strong>// ë¶„ì„ ìš”ì²­ ë©”ì‹œì§€ (analysis-requests)</strong>
{
  "requestId": "req_12345",
  "productId": "prod_67890",
  "userId": "user_abc123",
  "requestType": "single_product_analysis",
  "timestamp": "2025-01-31T10:30:00Z",
  "metadata": {
    "priority": "high",
    "source": "web_ui"
  }
}

<strong>// í¬ë¡¤ë§ ìƒíƒœ ë©”ì‹œì§€ (crawling-status)</strong>
{
  "requestId": "req_12345",
  "status": "in_progress",
  "progress": 45,
  "totalReviews": 1000,
  "crawledReviews": 450,
  "timestamp": "2025-01-31T10:32:15Z",
  "message": "í¬ë¡¤ë§ ì§„í–‰ ì¤‘..."
}

<strong>// ì›ë³¸ ë¦¬ë·° ë°ì´í„° (raw-review-data)</strong>
{
  "requestId": "req_12345",
  "productId": "prod_67890",
  "reviewId": "rev_xyz789",
  "reviewText": "ì´ ìƒí’ˆ ì •ë§ ì¢‹ì•„ìš”! ë°°ì†¡ë„ ë¹ ë¥´ê³ ...",
  "rating": 5,
  "reviewDate": "2025-01-30",
  "reviewerName": "ê¹€**",
  "timestamp": "2025-01-31T10:32:30Z"
}

<strong>// ì‹¤ì‹œê°„ ê°ì • ì¹´ë“œ (sentiment-cards)</strong>
{
  "requestId": "req_12345",
  "cardId": "card_001",
  "reviewText": "ì´ ìƒí’ˆ ì •ë§ ì¢‹ì•„ìš”!",
  "sentiment": "positive",
  "confidence": 0.95,
  "keywords": ["ì¢‹ì•„ìš”", "ë°°ì†¡", "ë¹ ë¥´ê³ "],
  "timestamp": "2025-01-31T10:35:20Z",
  "sequenceNumber": 1
}

<strong>// ìµœì¢… ë¶„ì„ ê²°ê³¼ (analysis-results)</strong>
{
  "requestId": "req_12345",
  "productId": "prod_67890",
  "analysisId": "analysis_456",
  "sentimentRatio": {
    "positive": 0.65,
    "neutral": 0.25,
    "negative": 0.10
  },
  "summary": "ì „ë°˜ì ìœ¼ë¡œ ê¸ì •ì ì¸ í‰ê°€...",
  "keywords": ["ì¢‹ì•„ìš”", "ë°°ì†¡", "í’ˆì§ˆ", "ê°€ê²©"],
  "totalReviews": 1000,
  "timestamp": "2025-01-31T10:40:00Z"
}</pre>
                </div>
            </div>
            
            <!-- Airflow êµ¬ì„± -->
            <div id="airflow" class="diagram-section">
                <h2>ğŸŒŠ Airflow EKS êµ¬ì„±</h2>
                <div class="description">
                    <h3>Pod ê¸°ë°˜ Airflow ë¶„ì‚° ë°°í¬</h3>
                    <p>ì œê³µí•´ì£¼ì‹  ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ EKS ë‚´ Airflow êµ¬ì„±ì…ë‹ˆë‹¤. ê° ì»´í¬ë„ŒíŠ¸ê°€ ë…ë¦½ì ì¸ Podë¡œ ë°°í¬ë©ë‹ˆë‹¤.</p>
                </div>
                <div class="diagram-container">
                    <div class="diagram-wrapper">
                        <div class="mermaid">
graph TB
    %% Airflow ë„¤ì„ìŠ¤í˜ì´ìŠ¤
    subgraph AirflowNamespace["ğŸŒŠ airflow namespace"]
        
        %% Git-Sync Pod
        subgraph GitSyncPod["ğŸ“¦ Git-Sync Pod"]
            GitSync[ğŸ“¦ Git-Sync Container<br/>DAG íŒŒì¼ ë™ê¸°í™”<br/>GitHub/GitLab ì—°ë™]
        end
        
        %% Airflow WebServer Pod
        subgraph WebServerPod["ğŸŒ Airflow WebServer Pod(1-3)"]
            WebServer[ğŸŒ Airflow WebServer<br/>ì›¹ UI ì œê³µ<br/>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤]
        end
        
        %% Airflow Scheduler Pod
        subgraph SchedulerPod["ğŸ“… Airflow Scheduler Pod(1)"]
            Scheduler[ğŸ“… Airflow Scheduler<br/>DAG ìŠ¤ì¼€ì¤„ë§<br/>íƒœìŠ¤í¬ í ê´€ë¦¬]
        end
        
        %% Airflow Worker Pods
        subgraph WorkerPods["ğŸ‘· Airflow Worker Pods(2-10)"]
            Worker1[ğŸ‘· Airflow Worker 1<br/>íƒœìŠ¤í¬ ì‹¤í–‰]
            Worker2[ğŸ‘· Airflow Worker 2<br/>íƒœìŠ¤í¬ ì‹¤í–‰]
            WorkerN[ğŸ‘· Airflow Worker N<br/>íƒœìŠ¤í¬ ì‹¤í–‰]
        end
        
        %% Kubernetes Executors
        subgraph K8sExecutors["âš™ï¸ Kubernetes Executors"]
            KubeExecutor1[âš™ï¸ Kubernetes Executor<br/>ë™ì  Pod ìƒì„±]
            KubePodOperator[âš™ï¸ KubernetesPodOperator<br/>GPU ì‘ì—… ì‹¤í–‰]
        end
        
        %% Spark Server Pods
        subgraph SparkPods["âš¡ Spark Server Pods(1-5)"]
            SparkDriver[âš¡ Spark Driver<br/>ì‘ì—… ì¡°ì •]
            SparkExecutor1[âš¡ Spark Executor 1<br/>ë°ì´í„° ì²˜ë¦¬]
            SparkExecutor2[âš¡ Spark Executor 2<br/>ë°ì´í„° ì²˜ë¦¬]
        end
        
        %% Analysis Server Pods
        subgraph AnalysisPods["ğŸ§  Analysis Server Pods(1-2)"]
            AnalysisServer1[ğŸ§  Analysis Server 1<br/>LLM ë¶„ì„<br/>GPU ì‚¬ìš©]
            AnalysisServer2[ğŸ§  Analysis Server 2<br/>LLM ë¶„ì„<br/>GPU ì‚¬ìš©]
        end
    end
    
    %% ì™¸ë¶€ ì„œë¹„ìŠ¤
    subgraph ExternalServices["ğŸ› ï¸ ì™¸ë¶€ ì„œë¹„ìŠ¤"]
        RDSAirflow[ğŸ—„ï¸ RDS PostgreSQL<br/>Airflow ë©”íƒ€ë°ì´í„° DB]
        S3Logs[ğŸª£ S3 Airflow Logs<br/>ë¡œê·¸ ì €ì¥ì†Œ]
        MSK[ğŸ“¨ Amazon MSK<br/>ë©”ì‹œì§€ í]
        LocalCrawler[ğŸ  ë¡œì»¬ í¬ë¡¤ë§ ì„œë²„<br/>VPN ì—°ê²°]
    end
    
    %% ì—°ê²° ê´€ê³„
    GitSync --> Scheduler
    Scheduler --> Worker1
    Scheduler --> Worker2
    Scheduler --> WorkerN
    
    WebServer --> RDSAirflow
    Scheduler --> RDSAirflow
    Worker1 --> RDSAirflow
    Worker2 --> RDSAirflow
    WorkerN --> RDSAirflow
    
    Worker1 --> S3Logs
    Worker2 --> S3Logs
    WorkerN --> S3Logs
    
    Worker1 --> KubeExecutor1
    Worker2 --> KubePodOperator
    
    KubeExecutor1 --> SparkDriver
    SparkDriver --> SparkExecutor1
    SparkDriver --> SparkExecutor2
    
    KubePodOperator --> AnalysisServer1
    KubePodOperator --> AnalysisServer2
    
    Worker1 -.->|API í˜¸ì¶œ| LocalCrawler
    Worker2 -.->|API í˜¸ì¶œ| LocalCrawler
    
    SparkExecutor1 --> MSK
    SparkExecutor2 --> MSK
    AnalysisServer1 --> MSK
    AnalysisServer2 --> MSK
    
    %% ìŠ¤íƒ€ì¼ë§
    classDef airflowCore fill:#017CEE,stroke:#fff,stroke-width:2px,color:#fff
    classDef executor fill:#FF9800,stroke:#fff,stroke-width:2px,color:#fff
    classDef processing fill:#4CAF50,stroke:#fff,stroke-width:2px,color:#fff
    classDef external fill:#9C27B0,stroke:#fff,stroke-width:2px,color:#fff
    classDef storage fill:#2196F3,stroke:#fff,stroke-width:2px,color:#fff
    
    class GitSync,WebServer,Scheduler,Worker1,Worker2,WorkerN airflowCore
    class KubeExecutor1,KubePodOperator executor
    class SparkDriver,SparkExecutor1,SparkExecutor2,AnalysisServer1,AnalysisServer2 processing
    class LocalCrawler,MSK external
    class RDSAirflow,S3Logs storage
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ë°ì´í„° í”Œë¡œìš° -->
            <div id="dataflow" class="diagram-section">
                <h2>ğŸ”„ ë°ì´í„° í”Œë¡œìš° (AWS MSK ê¸°ë°˜)</h2>
                <div class="description">
                    <h3>Amazon MSK ì¤‘ì‹¬ì˜ ë°ì´í„° ì²˜ë¦¬</h3>
                    <p>ê´€ë¦¬í˜• Kafka ì„œë¹„ìŠ¤ì¸ Amazon MSKë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬ íë¦„ì…ë‹ˆë‹¤. ê° ë‹¨ê³„ë³„ë¡œ ì ì ˆí•œ í† í”½ì„ í†µí•´ ë©”ì‹œì§€ê°€ ì „ë‹¬ë©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="features">
                    <div class="feature">
                        <h4>ğŸ“¥ ìš”ì²­ ë‹¨ê³„</h4>
                        <p>analysis-requests â†’ Airflow DAG íŠ¸ë¦¬ê±°</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ•·ï¸ í¬ë¡¤ë§ ë‹¨ê³„</h4>
                        <p>raw-review-data + crawling-status</p>
                    </div>
                    <div class="feature">
                        <h4>âš¡ ì²˜ë¦¬ ë‹¨ê³„</h4>
                        <p>processed-review-data + processing-status</p>
                    </div>
                    <div class="feature">
                        <h4>ğŸ§  ë¶„ì„ ë‹¨ê³„</h4>
                        <p>sentiment-cards + analysis-results</p>
                    </div>
                </div>
                <div class="diagram-container">
                    <div class="diagram-wrapper">
                        <div class="mermaid">
sequenceDiagram
    participant User as ğŸ‘¤ ì‚¬ìš©ì
    participant Frontend as âš›ï¸ Frontend
    participant API as ğŸ–¥ï¸ Backend API
    participant WS as ğŸ”Œ WebSocket
    participant MSK as ğŸ“¨ Amazon MSK
    participant Airflow as ğŸŒŠ Airflow
    participant LocalCrawler as ğŸ  ë¡œì»¬ í¬ë¡¤ë§ ì„œë²„
    participant Spark as âš¡ Spark
    participant Analysis as ğŸ§  Analysis
    participant S3 as ğŸª£ S3
    participant Redshift as ğŸ­ Redshift
    participant RDS as ğŸ—„ï¸ RDS
    participant Redis as ğŸ”´ Redis
    
    User->>Frontend: ìƒí’ˆ ë¶„ì„ ìš”ì²­
    Frontend->>API: POST /api/analysis/start
    API->>MSK: ë¶„ì„ ìš”ì²­ ë©”ì‹œì§€ ë°œí–‰
    API->>Redis: ìš”ì²­ ìƒíƒœ ìºì‹±
    API-->>Frontend: ë¶„ì„ ID ë°˜í™˜
    
    Frontend->>WS: WebSocket ì—°ê²° (ë¶„ì„ ID)
    
    MSK->>Airflow: ë©”ì‹œì§€ ìˆ˜ì‹  ë° DAG íŠ¸ë¦¬ê±°
    Airflow->>LocalCrawler: VPNì„ í†µí•œ API í˜¸ì¶œ
    
    Note over LocalCrawler: ë©€í‹°í”„ë¡œì„¸ì‹± í¬ë¡¤ë§ ì‹¤í–‰
    
    loop í¬ë¡¤ë§ ì§„í–‰
        LocalCrawler-->>MSK: VPNì„ í†µí•œ ì§„í–‰ ìƒíƒœ ì—…ë°ì´íŠ¸
        MSK->>API: ìƒíƒœ ë©”ì‹œì§€ ìˆ˜ì‹ 
        API->>WS: ì‹¤ì‹œê°„ ìƒíƒœ ì „ì†¡
        WS-->>Frontend: ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
    end
    
    LocalCrawler-->>S3: VPNì„ í†µí•œ ì›ë³¸ ë°ì´í„° ì €ì¥
    LocalCrawler-->>MSK: VPNì„ í†µí•œ ìˆ˜ì§‘ëœ ë¦¬ë·° ë°ì´í„° ì „ì†¡
    
    MSK->>Spark: KubernetesPodOperatorë¡œ Spark ì‘ì—… ì‹¤í–‰
    Spark->>S3: ì „ì²˜ë¦¬ëœ ë°ì´í„° ì €ì¥
    Spark->>MSK: ì²˜ë¦¬ëœ ë°ì´í„° ì „ì†¡
    
    MSK->>Analysis: KubernetesPodOperatorë¡œ GPU ë¶„ì„ ì‘ì—… ì‹¤í–‰
    
    loop ë¶„ì„ ì§„í–‰
        Analysis->>MSK: ë¶„ì„ ì§„í–‰ ìƒíƒœ
        MSK->>API: ìƒíƒœ ë©”ì‹œì§€ ìˆ˜ì‹ 
        API->>WS: ì‹¤ì‹œê°„ ìƒíƒœ ì „ì†¡
        WS-->>Frontend: ë¶„ì„ ì§„í–‰ë¥ 
        
        Analysis->>MSK: ê°œë³„ ê°ì • ì¹´ë“œ ê²°ê³¼
        MSK->>API: ì¹´ë“œ ë°ì´í„° ìˆ˜ì‹ 
        API->>Redis: ì¹´ë“œ ë°ì´í„° ì„ì‹œ ì €ì¥
        API->>WS: ì‹¤ì‹œê°„ ì¹´ë“œ ì „ì†¡
        WS-->>Frontend: ê°ì • ì¹´ë“œ í‘œì‹œ
    end
    
    Analysis->>Redshift: ìµœì¢… ë¶„ì„ ê²°ê³¼ ì €ì¥
    Analysis->>RDS: ì›¹ ì„œë¹„ìŠ¤ìš© ê²°ê³¼ ì €ì¥
    Analysis->>MSK: ë¶„ì„ ì™„ë£Œ ì•Œë¦¼
    MSK->>API: ì™„ë£Œ ë©”ì‹œì§€ ìˆ˜ì‹ 
    API->>WS: ë¶„ì„ ì™„ë£Œ ì•Œë¦¼
    WS-->>Frontend: ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
    
    Frontend->>API: GET /api/analysis/{id}/results
    API->>RDS: ë¶„ì„ ê²°ê³¼ ì¡°íšŒ
    API->>Redis: ê²°ê³¼ ìºì‹±
    API-->>Frontend: ë¶„ì„ ê²°ê³¼ ë°˜í™˜
    
    Note over MSK: Amazon MSK í† í”½ë³„ ë©”ì‹œì§€ í”Œë¡œìš°<br/>1. analysis-requests (ìš”ì²­)<br/>2. raw-review-data (ì›ë³¸ ë°ì´í„°)<br/>3. crawling-status (í¬ë¡¤ë§ ìƒíƒœ)<br/>4. processed-review-data (ì²˜ë¦¬ëœ ë°ì´í„°)<br/>5. processing-status (ì²˜ë¦¬ ìƒíƒœ)<br/>6. sentiment-cards (ì‹¤ì‹œê°„ ì¹´ë“œ)<br/>7. analysis-results (ìµœì¢… ê²°ê³¼)
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentZoom = 1;
        
        // Mermaid ì´ˆê¸°í™”
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: 'Arial, sans-serif',
            fontSize: 16,
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'basis',
                padding: 30,
                nodeSpacing: 80,
                rankSpacing: 100
            },
            sequence: {
                useMaxWidth: false,
                width: 200,
                height: 100,
                actorMargin: 80,
                boxMargin: 15,
                messageMargin: 50
            }
        });

        function showDiagram(diagramId) {
            // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            const sections = document.querySelectorAll('.diagram-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™”
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ì„ íƒëœ ì„¹ì…˜ í‘œì‹œ
            const targetSection = document.getElementById(diagramId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // ì„ íƒëœ ë²„íŠ¼ í™œì„±í™”
            event.target.classList.add('active');
            
            // ì¤Œ ë¦¬ì…‹
            resetZoom();
            
            // í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function zoomIn() {
            currentZoom = Math.min(currentZoom * 1.2, 3);
            applyZoom();
        }
        
        function zoomOut() {
            currentZoom = Math.max(currentZoom / 1.2, 0.3);
            applyZoom();
        }
        
        function resetZoom() {
            currentZoom = 1;
            applyZoom();
        }
        
        function fitToScreen() {
            const container = document.querySelector('.diagram-section.active .diagram-container');
            const diagram = document.querySelector('.diagram-section.active .diagram-wrapper');
            if (container && diagram) {
                const containerWidth = container.clientWidth - 40;
                const diagramWidth = diagram.scrollWidth;
                currentZoom = Math.min(containerWidth / diagramWidth, 1);
                applyZoom();
            }
        }
        
        function applyZoom() {
            const activeDiagram = document.querySelector('.diagram-section.active .diagram-wrapper');
            if (activeDiagram) {
                activeDiagram.style.transform = `scale(${currentZoom})`;
            }
            
            // ì¤Œ ë ˆë²¨ í‘œì‹œ ì—…ë°ì´íŠ¸
            const zoomDisplay = Math.round(currentZoom * 100);
            document.querySelector('.zoom-controls .zoom-btn:nth-child(3)').textContent = `${zoomDisplay}%`;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸° ì„¤ì •
        window.addEventListener('load', function() {
            setTimeout(() => {
                mermaid.init();
                setTimeout(fitToScreen, 1000);
            }, 100);
        });
    </script>
</body>
</html>